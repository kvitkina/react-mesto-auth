{"version":3,"sources":["images/logo-mesto.svg","images/success.svg","images/fail.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/ImagePopup.js","utils/Api.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmDeletePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","utils/auth.js","components/InfoTooltip.js","components/App.js","index.js"],"names":["module","exports","Header","email","onSignOut","className","src","logo","alt","exact","path","to","onClick","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardDelete","onCardLike","onCardDislike","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","style","backgroundImage","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","avatar","about","map","key","ImagePopup","onClose","api","baseUrl","headers","this","res","ok","json","Promise","reject","Error","status","all","getInitialCards","getUserInfo","fetch","then","_handleOriginalResponse","item","method","body","JSON","stringify","id","authorization","PopupWithForm","isOpen","children","title","submit","onSubmit","evt","target","currentTarget","noValidate","type","value","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","placeholder","onChange","required","minLength","maxLength","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","ref","AddPlacePopup","nameRef","linkRef","ConfirmDeletePopup","cardId","Login","onLogin","setEmail","password","setPassword","Register","onRegister","ProtectedRoute","Component","component","props","loggedIn","BASE_URL","InfoTooltip","tooltipStatus","message","errMessage","success","fail","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","selectedCard","setSelectedCard","cardToDelete","setCardToDelete","setCurrentUser","setCards","setLoggedIn","isInfoTooltipOpen","setIsInfoTooltipOpen","setTooltipStatus","history","useHistory","handleTokenCheck","token","jwt","localStorage","getItem","data","push","catch","err","console","log","getAllInfo","dataCards","dataProfile","handleEscClose","closeAllPopups","document","addEventListener","removeEventListener","handleTooltip","Provider","removeItem","putLike","newCard","newCards","c","removeLike","setItem","auth","setUserInfo","editAvatar","addCard","deleteCard","filter","ReactDOM","render","StrictMode","getElementById"],"mappings":"oGAAAA,EAAOC,QAAU,IAA0B,wC,mBCA3CD,EAAOC,QAAU,IAA0B,qC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,2LCiC5BC,MA5Bf,YAAuC,IAArBC,EAAoB,EAApBA,MAAOC,EAAa,EAAbA,UACvB,OACE,4BAAQC,UAAU,UAChB,yBAAKC,IAAKC,IAAMF,UAAU,OAAOG,IAAI,+CACrC,yBAAKH,UAAU,mBACf,kBAAC,IAAD,CAAOI,OAAK,EAACC,KAAK,KAChB,uBAAGL,UAAU,iBAAiBF,GAC9B,kBAAC,IAAD,CAAMQ,GAAG,WAAWN,UAAU,iBAAiBO,QAASR,GAAxD,mCAKF,kBAAC,IAAD,CAAOM,KAAK,YACV,kBAAC,IAAD,CAAMC,GAAG,WAAWN,UAAU,kBAA9B,mCAKF,kBAAC,IAAD,CAAOK,KAAK,YACV,kBAAC,IAAD,CAAMC,GAAG,WAAWN,UAAU,kBAA9B,0ECdOQ,MARf,WACE,OACE,4BAAQR,UAAU,UAChB,wBAAIA,UAAU,kBAAd,4BCHOS,EAAqBC,IAAMC,gBC6CzBC,MA5Cf,YAA+E,IAA/DC,EAA8D,EAA9DA,KAAMC,EAAwD,EAAxDA,YAAaC,EAA2C,EAA3CA,aAAcC,EAA6B,EAA7BA,WAAYC,EAAiB,EAAjBA,cACrDC,EAAcR,IAAMS,WAAWV,GAE/BW,EAAQP,EAAKQ,MAAMC,MAAQJ,EAAYI,IAEvCC,EAAUV,EAAKW,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEJ,MAAQJ,EAAYI,OAEvDK,EAAuB,wBAAoBJ,GAAW,6BAc5D,OACE,wBAAIvB,UAAU,WACZ,yBACE4B,MAAO,CAAEC,gBAAgB,OAAD,OAAShB,EAAKiB,KAAd,MACxB9B,UAAU,iBACVG,IAAI,GACJI,QAnBc,WAClBO,EAAYD,MAoBTO,GAAS,4BAAQpB,UAAU,iBAAiBO,QAlBvB,WACxBQ,EAAaF,EAAKS,QAkBhB,yBAAKtB,UAAU,iBACb,wBAAIA,UAAU,kBAAkBa,EAAKkB,MACrC,yBAAK/B,UAAU,2BACb,4BACEA,UAAW2B,EACXpB,QAASgB,EAlBQ,WACzBN,EAAcJ,IAJQ,WACtBG,EAAWH,MAsBL,uBAAGb,UAAU,yBAAyBa,EAAKW,MAAMQ,YCU5CC,MA9Cf,YASI,IARFC,EAQC,EARDA,aACAC,EAOC,EAPDA,cACAC,EAMC,EANDA,WACAtB,EAKC,EALDA,YACAuB,EAIC,EAJDA,MACArB,EAGC,EAHDA,WACAC,EAEC,EAFDA,cACAF,EACC,EADDA,aAEMG,EAAcR,IAAMS,WAAWV,GAErC,OACE,0BAAMT,UAAU,WACd,6BAASA,UAAU,WACjB,4BACEA,UAAU,kBACV4B,MAAO,CAAEC,gBAAgB,OAAD,OAASX,EAAYoB,OAArB,MACxB/B,QAAS2B,IAEX,yBAAKlC,UAAU,iBACb,wBAAIA,UAAU,iBAAiBkB,EAAYa,MAC3C,4BAAQ/B,UAAU,uBAAuBO,QAAS4B,IAClD,uBAAGnC,UAAU,gBAAgBkB,EAAYqB,QAE3C,4BAAQvC,UAAU,sBAAsBO,QAAS6B,KAGnD,yBAAKpC,UAAU,YACb,wBAAIA,UAAU,kBACXqC,EAAMG,KAAI,SAAC3B,GAAD,OACT,kBAAC,EAAD,CACE4B,IAAK5B,EAAKS,IACVT,KAAMA,EACNC,YAAaA,EACbC,aAAcA,EACdC,WAAYA,EACZC,cAAeA,WC3BdyB,MAZf,YAA8C,IAAxB7B,EAAuB,EAAvBA,KAAM8B,EAAiB,EAAjBA,QAASZ,EAAQ,EAARA,KACnC,OACE,6BAAS/B,UAAS,sBAAiB+B,EAAjB,YAAyBlB,GAAQ,iBACjD,yBAAKb,UAAU,0BACb,yBAAKC,IAAKY,GAAQA,EAAKiB,KAAM9B,UAAU,eAAeG,IAAKU,GAAQA,EAAKkB,OACxE,uBAAG/B,UAAU,gBAAgBa,GAAQA,EAAKkB,MAC1C,4BAAQ/B,UAAU,eAAeO,QAASoC,O,gBCyEnCC,EAPH,I,WAzEV,cAAmC,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCC,KAAKF,QAAUA,EACfE,KAAKD,QAAUA,E,oEAGOE,GACtB,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,IAAIC,MAAJ,0GAAkCL,EAAIM,Y,mCAG5D,OAAOH,QAAQI,IAAI,CAACR,KAAKS,kBAAmBT,KAAKU,kB,wCAIjD,OAAOC,MAAM,GAAD,OAAIX,KAAKF,QAAT,UAA0B,CACpCC,QAASC,KAAKD,UACba,KAAKZ,KAAKa,2B,8BAGPC,GACN,OAAOH,MAAM,GAAD,OAAIX,KAAKF,QAAT,UAA0B,CACpCiB,OAAQ,OACRhB,QAASC,KAAKD,QACdiB,KAAMC,KAAKC,UAAUJ,KACpBF,KAAKZ,KAAKa,2B,iCAGJM,GACT,OAAOR,MAAM,GAAD,OAAIX,KAAKF,QAAT,kBAA0BqB,GAAM,CAC1CJ,OAAQ,SACRhB,QAASC,KAAKD,UACba,KAAKZ,KAAKa,2B,oCAIb,OAAOF,MAAM,GAAD,OAAIX,KAAKF,QAAT,aAA6B,CACvCC,QAASC,KAAKD,UACba,KAAKZ,KAAKa,2B,kCAGHC,GACV,OAAOH,MAAM,GAAD,OAAIX,KAAKF,QAAT,aAA6B,CACvCiB,OAAQ,QACRhB,QAASC,KAAKD,QACdiB,KAAMC,KAAKC,UAAUJ,KACpBF,KAAKZ,KAAKa,2B,iCAGJC,GACT,OAAOH,MAAM,GAAD,OAAIX,KAAKF,QAAT,oBAAoC,CAC9CiB,OAAQ,QACRhB,QAASC,KAAKD,QACdiB,KAAMC,KAAKC,UAAUJ,KACpBF,KAAKZ,KAAKa,2B,8BAGPM,GACN,OAAOR,MAAM,GAAD,OAAIX,KAAKF,QAAT,wBAAgCqB,GAAM,CAChDJ,OAAQ,MACRhB,QAASC,KAAKD,UACba,KAAKZ,KAAKa,2B,iCAGJM,GACT,OAAOR,MAAM,GAAD,OAAIX,KAAKF,QAAT,wBAAgCqB,GAAM,CAChDJ,OAAQ,SACRhB,QAASC,KAAKD,UACba,KAAKZ,KAAKa,6B,KAIL,CAAQ,CAClBf,QAAS,8CACTC,QAAS,CACPqB,cAAe,uCACf,eAAgB,sBCxDLC,MApBf,YAAsF,IAA7DC,EAA4D,EAA5DA,OAAQC,EAAoD,EAApDA,SAAU3B,EAA0C,EAA1CA,QAASZ,EAAiC,EAAjCA,KAAMwC,EAA2B,EAA3BA,MAAOC,EAAoB,EAApBA,OAAQC,EAAY,EAAZA,SACvE,OACE,6BACEzE,UAAS,sBAAiB+B,EAAjB,YAAyBsC,GAAM,eAA/B,KACT9D,QAAS,SAACmE,GAAD,OAAUA,EAAIC,SAAWD,EAAIE,eAAkBjC,IAExD,yBAAK3C,UAAU,oBACb,4BAAQA,UAAU,eAAeO,QAASoC,IAC1C,0BAAM3C,UAAU,wBAAwB+B,KAAMA,EAAM0C,SAAUA,EAAUI,YAAU,GAChF,wBAAI7E,UAAU,gBAAgBuE,GAC9B,8BAAUvE,UAAU,eACjBsE,EACD,2BAAOQ,KAAK,SAAS9E,UAAU,gBAAgB+E,MAAOP,EAAQjE,QAASoC,SC2DpEqC,MArEf,YAA8D,IAAlCX,EAAiC,EAAjCA,OAAQ1B,EAAyB,EAAzBA,QAASsC,EAAgB,EAAhBA,aAAgB,EACnCvE,IAAMwE,SAAS,IADoB,mBACpDnD,EADoD,KAC9CoD,EAD8C,OAErBzE,IAAMwE,SAAS,IAFM,mBAEpDE,EAFoD,KAEvCC,EAFuC,KAGrDnE,EAAcR,IAAMS,WAAWV,GAuBrC,OAdAC,IAAM4E,WAAU,WACdH,EAAQjE,EAAYa,MACpBsD,EAAenE,EAAYqB,SAC1B,CAACrB,IAYF,kBAAC,EAAD,CACEa,KAAK,eACLwC,MAAM,4HACNC,OAAO,yDACPH,OAAQA,EACR1B,QAASA,EACT8B,SAhBiB,SAACc,GACpBA,EAAEC,iBAEFP,EAAa,CACXlD,OACAQ,MAAO6C,MAaP,yBAAKpF,UAAU,0BACb,2BACE8E,KAAK,OACLZ,GAAG,OACHnC,KAAK,OACL/B,UAAU,2BACVyF,YAAY,qBACZV,MAAOhD,GAAQ,GACf2D,SAtCiB,SAACH,GACxBJ,EAAQI,EAAEZ,OAAOI,QAsCXY,UAAQ,EACRC,UAAU,IACVC,UAAU,OAEZ,0BAAM7F,UAAU,qBAAqBkE,GAAG,gBAE1C,yBAAKlE,UAAU,0BACb,2BACE8E,KAAK,OACLZ,GAAG,MACHnC,KAAK,QACL/B,UAAU,0BACVyF,YAAY,yDACZV,MAAOK,GAAe,GACtBM,SAlDgB,SAACH,GACvBF,EAAeE,EAAEZ,OAAOI,QAkDlBY,UAAQ,EACRC,UAAU,IACVC,UAAU,QAEZ,0BAAM7F,UAAU,qBAAqBkE,GAAG,iBC7BjC4B,MAnCf,YAA+D,IAApCzB,EAAmC,EAAnCA,OAAQ1B,EAA2B,EAA3BA,QAASoD,EAAkB,EAAlBA,eACpCC,EAAYtF,IAAMuF,SASxB,OACE,kBAAC,EAAD,CACElE,KAAK,cACLwC,MAAM,wFACNC,OAAO,yDACPH,OAAQA,EACR1B,QAASA,EACT8B,SAdiB,SAACc,GACpBA,EAAEC,iBACFO,EAAe,CACbzD,OAAQ0D,EAAUE,QAAQnB,UAa1B,yBAAK/E,UAAU,0BACb,2BACE8E,KAAK,MACLZ,GAAG,OACHnC,KAAK,SACL/B,UAAU,iDACVyF,YAAY,yFACZE,UAAQ,EACRQ,IAAKH,IAEP,0BAAMhG,UAAU,qBAAqBkE,GAAG,kBCsBjCkC,MAnDf,YAAyD,IAAhCzD,EAA+B,EAA/BA,QAAS0B,EAAsB,EAAtBA,OAAQjC,EAAc,EAAdA,WAClCiE,EAAU3F,IAAMuF,SAChBK,EAAU5F,IAAMuF,SAWtB,OACE,kBAAC,EAAD,CACElE,KAAK,YACLwC,MAAM,gEACNC,OAAO,6CACPH,OAAQA,EACR1B,QAASA,EACT8B,SAhBiB,SAACc,GACpBA,EAAEC,iBAEFpD,EAAW,CACTL,KAAMsE,EAAQH,QAAQnB,MACtBjD,KAAMwE,EAAQJ,QAAQnB,UAatB,yBAAK/E,UAAU,0BACb,2BACE8E,KAAK,OACLZ,GAAG,QACHnC,KAAK,OACL/B,UAAU,mDACVyF,YAAY,mDACZE,UAAQ,EACRC,UAAU,IACVC,UAAU,KACVM,IAAKE,IAEP,0BAAMrG,UAAU,qBAAqBkE,GAAG,iBAE1C,yBAAKlE,UAAU,0BACb,2BACE8E,KAAK,MACLZ,GAAG,OACHnC,KAAK,OACL/B,UAAU,iDACVyF,YAAY,qGACZE,UAAQ,EACRQ,IAAKG,IAEP,0BAAMtG,UAAU,qBAAqBkE,GAAG,kBC3BjCqC,MAnBf,YAAoE,IAAtCC,EAAqC,EAArCA,OAAQnC,EAA6B,EAA7BA,OAAQ1B,EAAqB,EAArBA,QAAS8B,EAAY,EAAZA,SAMrD,OACE,kBAAC,EAAD,CACE1C,KAAK,SACLwC,MAAM,iEACNC,OAAO,eACPH,OAAQA,EACR1B,QAASA,EACT8B,SAZmB,SAACc,GACtBA,EAAEC,iBACFf,EAAS+B,OCoDEC,MAxDf,YAAmD,IAAjC1E,EAAgC,EAAhCA,KAAMwC,EAA0B,EAA1BA,MAAOC,EAAmB,EAAnBA,OAAQkC,EAAW,EAAXA,QAAW,EACtBhG,IAAMwE,SAAS,IADO,mBACzCpF,EADyC,KAClC6G,EADkC,OAEhBjG,IAAMwE,SAAS,IAFC,mBAEzC0B,EAFyC,KAE/BC,EAF+B,KAchD,OACE,6BAAS7G,UAAU,0BACnB,yBAAKA,UAAU,gDACb,0BAAMA,UAAU,wBAAwB+B,KAAMA,EAAM0C,SAPnC,SAACc,GACpBA,EAAEC,iBACFkB,EAAQ5G,EAAO8G,IAK+D/B,YAAU,GACpF,wBAAI7E,UAAU,wCAAwCuE,GACtD,8BAAUvE,UAAU,eACpB,yBAAKA,UAAU,0BACf,2BACE8E,KAAK,QACLZ,GAAG,QACHnC,KAAK,QACL/B,UAAU,mDACVyF,YAAY,QACZV,MAAOjF,GAAS,GAChB4F,SAxBkB,SAACH,GACzBoB,EAASpB,EAAEZ,OAAOI,QAwBZY,UAAQ,IAEV,0BAAM3F,UAAU,qBAAqBkE,GAAG,iBAE1C,yBAAKlE,UAAU,0BACb,2BACE8E,KAAK,WACLZ,GAAG,WACHnC,KAAK,WACL/B,UAAU,wEACVyF,YAAY,uCACZV,MAAO6B,GAAY,GACnBlB,SAlCqB,SAACH,GAC5BsB,EAAYtB,EAAEZ,OAAOI,QAkCfY,UAAQ,EACRC,UAAU,IACVC,UAAU,OAEZ,0BAAM7F,UAAU,qBAAqBkE,GAAG,oBAEtC,2BAAOY,KAAK,SAAS9E,UAAU,yCAAyC+E,MAAOP,SCgB1EsC,MA/Df,YAAyD,IAApC/E,EAAmC,EAAnCA,KAAMwC,EAA6B,EAA7BA,MAAOC,EAAsB,EAAtBA,OAAQuC,EAAc,EAAdA,WAAc,EAC5BrG,IAAMwE,SAAS,IADa,mBAC/CpF,EAD+C,KACxC6G,EADwC,OAEtBjG,IAAMwE,SAAS,IAFO,mBAE/C0B,EAF+C,KAErCC,EAFqC,KAgBtD,OACE,6BAAS7G,UAAU,0BACnB,yBAAKA,UAAU,gDACb,0BAAMA,UAAU,wBAAwB+B,KAAMA,EAAM0C,SARnC,SAACc,GACpBA,EAAEC,iBACFuB,EAAWjH,EAAO8G,IAM4D/B,YAAU,GACpF,wBAAI7E,UAAU,wCAAwCuE,GACtD,8BAAUvE,UAAU,eACpB,yBAAKA,UAAU,0BACf,2BACE8E,KAAK,QACLZ,GAAG,QACHnC,KAAK,QACL/B,UAAU,mDACVyF,YAAY,QACZV,MAAOjF,GAAS,GAChB4F,SA1BkB,SAACH,GACzBoB,EAASpB,EAAEZ,OAAOI,QA0BZY,UAAQ,IAEV,0BAAM3F,UAAU,qBAAqBkE,GAAG,iBAE1C,yBAAKlE,UAAU,0BACb,2BACE8E,KAAK,WACLZ,GAAG,WACHnC,KAAK,WACL/B,UAAU,wEACVyF,YAAY,uCACZV,MAAO6B,GAAY,GACnBlB,SApCqB,SAACH,GAC5BsB,EAAYtB,EAAEZ,OAAOI,QAoCfY,UAAQ,EACRC,UAAU,IACVC,UAAU,OAEZ,0BAAM7F,UAAU,qBAAqBkE,GAAG,oBAEtC,2BAAOY,KAAK,SAAS9E,UAAU,6CAA6C+E,MAAOP,OAIvF,yBAAKxE,UAAU,kBACX,uBAAGA,UAAU,oBAAb,uHACE,kBAAC,IAAD,CAAMM,GAAG,WAAWN,UAAU,uBAA9B,sC,QC/CGgH,EATQ,SAAC,GAAyC,IAA5BC,EAA2B,EAAtCC,UAAyBC,EAAa,6BAC9D,OACE,kBAAC,IAAD,MAEI,kBAAMA,EAAMC,SAAW,kBAACH,EAAcE,GAAY,kBAAC,IAAD,CAAU7G,GAAG,kBCP1D+G,EAAW,gC,kCCyBTC,EArBK,SAAC,GAA6D,IAA3DC,EAA0D,EAA1DA,cAAe5E,EAA2C,EAA3CA,QAAS0B,EAAkC,EAAlCA,OAAQmD,EAA0B,EAA1BA,QAASC,EAAiB,EAAjBA,WAC9D,OACE,6BACEzH,UAAS,gBAAWqE,GAAM,eAAjB,KACT9D,QAAS,SAACmE,GAAD,OAAUA,EAAIC,SAAWD,EAAIE,eAAkBjC,IAExD,yBAAK3C,UAAU,oBACb,4BAAQA,UAAU,eAAeO,QAASoC,IAC1C,yBACE3C,UAAU,cACVC,IAAMsH,EAAgBG,IAAUC,IAChCxH,IAAI,YAEN,wBAAIH,UAAU,2CACVuH,EAAgBC,EAAUC,MCuRvBG,EAvRH,WAAO,IAAD,EAC4ClH,IAAMwE,UAAS,GAD3D,mBACT2C,EADS,KACeC,EADf,OAEsCpH,IAAMwE,UAAS,GAFrD,mBAET6C,EAFS,KAEYC,EAFZ,OAG0CtH,IAAMwE,UAAS,GAHzD,mBAGT+C,EAHS,KAGcC,EAHd,OAIkCxH,IAAMwE,UAAS,GAJjD,mBAITiD,EAJS,KAIUC,EAJV,OAKwB1H,IAAMwE,SAAS,MALvC,mBAKTmD,EALS,KAKKC,EALL,OAMwB5H,IAAMwE,SAAS,MANvC,mBAMTqD,EANS,KAMKC,EANL,OAOsB9H,IAAMwE,SAAS,IAPrC,mBAOThE,EAPS,KAOIuH,EAPJ,OAQU/H,IAAMwE,SAAS,IARzB,mBAQT7C,EARS,KAQFqG,EARE,OASgBhI,IAAMwE,UAAS,GAT/B,mBASTkC,EATS,KASCuB,GATD,QAUUjI,IAAMwE,SAAS,IAVzB,qBAUTpF,GAVS,MAUF6G,GAVE,SAWkCjG,IAAMwE,UAAS,GAXjD,qBAWT0D,GAXS,MAWUC,GAXV,SAY0BnI,IAAMwE,SAAS,IAZzC,qBAYTqC,GAZS,MAYMuB,GAZN,MAaVC,GAAUC,cAEhBtI,IAAM4E,WAAU,WACd2D,QAGF,IAkCMA,GAAmB,WACvB,IFrDuBC,EEqDjBC,EAAMC,aAAaC,QAAQ,OAC7BF,IFtDmBD,EEuDPC,EFtDTzF,MAAM,GAAD,OAAI2D,EAAJ,aAAyB,CACnCvD,OAAQ,MACRhB,QAAS,CACP,OAAU,mBACV,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BoG,MAG9BvF,MAAK,SAACX,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,IAAIC,MAAJ,0GAAkCL,EAAIM,cE2C7DK,MAAK,SAACX,GACH2F,IAAY,GACZhC,GAAS3D,EAAIsG,KAAKxJ,OAClBiJ,GAAQQ,KAAK,QAEhBC,OAAM,SAAAC,GACL,OAAmB,MAAfA,EAAInG,OACCoG,QAAQC,IAAI,0OAEZD,QAAQC,IAAI,sKAazBjJ,IAAM4E,WAAU,WACd1C,EACGgH,aACAjG,MAAK,SAACX,GAAS,IAAD,cACoBA,EADpB,GACN6G,EADM,KACKC,EADL,KAEbpB,EAASmB,GACTpB,EAAeqB,MAEhBN,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAEf,IAEH/I,IAAM4E,WAAU,WACd,IAAMyE,EAAiB,SAACrF,GACN,WAAZA,EAAIjC,KACNuH,MAIJ,OADAC,SAASC,iBAAiB,UAAWH,GAC9B,WACLE,SAASE,oBAAoB,UAAWJ,MAE1C,IAEF,IA0FMK,GAAgB,WACpBvB,IAAqB,IAGjBmB,GAAiB,WACrBlC,GAA0B,GAC1BE,GAAuB,GACvBE,GAAyB,GACzBI,EAAgB,MAChBF,GAAqB,GACrBS,IAAqB,IAGvB,OACE,kBAACpI,EAAmB4J,SAApB,CAA6BtF,MAAO7D,GAClC,yBAAKlB,UAAU,QACb,yBAAKA,UAAU,mBACb,kBAAC,EAAD,CAAQF,MAAOA,GAAOC,UA5IZ,WAChBqJ,aAAakB,WAAW,OACxB3B,IAAY,GACZI,GAAQQ,KAAK,cA0IP,kBAAC,IAAD,KACA,kBAAC,EAAD,CACEnJ,OAAK,EAACC,KAAK,IACX+G,SAAUA,EACVlF,aAtCoB,WAC5BgG,GAAyB,IAsCjB/F,cApCqB,WAC7B2F,GAA0B,IAoClB1F,WAlCkB,WAC1B4F,GAAuB,IAkCflH,YAhCc,SAACuH,GACvBC,EAAgBD,IAgCRtH,aA9BgB,SAACyF,GACzB4B,GAAqB,GACrBI,EAAgBhC,IA6BRxF,WArHa,SAACH,GACtB,IAAMU,EAAUV,EAAKW,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEJ,MAAQJ,EAAYI,OAC7DsB,EACG2H,QAAQ1J,EAAKS,KAAMC,GACnBoC,MAAK,SAAC6G,GACL,IAAMC,EAAWpI,EAAMG,KAAI,SAACkI,GAAD,OAAQA,EAAEpJ,MAAQT,EAAKS,IAAMkJ,EAAUE,KAClEhC,EAAS+B,MAEVjB,OAAM,SAACC,GACNC,QAAQC,IAAIF,OA6GRxI,cAzGgB,SAACJ,GACzB,IAAMU,EAAUV,EAAKW,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEJ,MAAQJ,EAAYI,OAC7DsB,EACG+H,WAAW9J,EAAKS,KAAMC,GACtBoC,MAAK,SAAC6G,GACL,IAAMC,EAAWpI,EAAMG,KAAI,SAACkI,GAAD,OAAQA,EAAEpJ,MAAQT,EAAKS,IAAMkJ,EAAUE,KAClEhC,EAAS+B,MAEVjB,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAiGRpH,MAAOA,EACP6E,UAAWjF,IAEb,kBAAC,IAAD,CAAO7B,OAAK,EAACC,KAAK,KAAI,kBAAC,EAAD,OACtB,kBAAC,IAAD,CAAOA,KAAK,YACV,kBAAC,EAAD,CACE0B,KAAK,QACLwC,MAAM,2BACNC,OAAO,iCACPkC,QArMI,SAAC5G,EAAO8G,IFjBC,SAAC9G,EAAO8G,GAC/B,OAAOlD,MAAM,GAAD,OAAI2D,EAAJ,WAAuB,CACjCvD,OAAQ,OACRhB,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBiB,KAAMC,KAAKC,UAAU,CAACnE,QAAO8G,eAE9BjD,MAAK,SAACX,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,IAAIC,MAAJ,0GAAkCL,EAAIM,aAE7DK,MAAK,SAAC2F,GACL,GAAIA,EAAKJ,MAEP,OADAE,aAAawB,QAAQ,MAAOtB,EAAKH,KAC1BG,MEAXuB,CAAe/K,EAAO8G,GACrBjD,MAAK,SAAAX,GACFoG,aAAawB,QAAQ,MAAO5H,EAAIkG,OAChCP,IAAY,GACZhC,GAAS7G,GACTiJ,GAAQQ,KAAK,QAEhBC,OAAM,SAAAC,GACL,OAAmB,MAAfA,EAAInG,OACCoG,QAAQC,IAAI,sIACK,MAAfF,EAAInG,OACNoG,QAAQC,IAAI,2IAEdD,QAAQC,IAAI,oBA0Lf,kBAAC,IAAD,CAAOtJ,KAAK,YACV,kBAAC,EAAD,CACE0B,KAAK,WACLwC,MAAM,qEACNC,OAAO,+GACPuC,WA7NO,SAACjH,EAAO8G,IFnCL,SAAC9G,EAAO8G,GAC9B,OAAOlD,MAAM,GAAD,OAAI2D,EAAJ,WAAuB,CACjCvD,OAAQ,OACRhB,QAAS,CACP,OAAU,mBACV,eAAgB,oBAElBiB,KAAMC,KAAKC,UAAU,CAAEnE,QAAO8G,eAE/BjD,MAAK,SAACX,GACL,OAAIA,EAAIC,GACCD,EAAIE,OAENC,QAAQC,OAAO,IAAIC,MAAJ,0GAAkCL,EAAIM,cEuB5DuH,CAAc/K,EAAO8G,GACpBjD,MAAK,SAACX,GACLoH,KACAtB,IAAiB,GACjBC,GAAQQ,KAAK,eAEZC,OAAM,SAACC,GACY,MAAfA,EAAInG,QACToG,QAAQC,IAAI,mMAEZS,KACAtB,IAAiB,WAqNb,kBAAC,EAAD,CACEzE,OAAQwD,EACRlF,QAASqH,GACT/E,aAzGe,SAACqE,GACxB1G,EACGkI,YAAYxB,GACZ3F,MAAK,SAACX,GACLyF,EAAezF,GACfgH,QAEDR,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAmGV,kBAAC,EAAD,CACEpF,OAAQ4D,EACRtF,QAASqH,GACTjE,eAlGiB,SAACuD,GAC1B1G,EACGmI,WAAWzB,GACX3F,MAAK,SAACX,GACLyF,EAAezF,GACfgH,QAEDR,OAAM,SAACC,GACNC,QAAQC,IAAIF,SA4FV,kBAAC,EAAD,CACEpF,OAAQ0D,EACRpF,QAASqH,GACT5H,WA3FmB,SAACoI,GAC5B5H,EACGoI,QAAQR,GACR7G,MAAK,SAAC6G,GACL9B,EAAS,CAAC8B,GAAF,mBAAcnI,KACtB2H,QAEDR,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAqFV,kBAAC,EAAD,CACEpF,OAAQ8D,EACRxF,QAASqH,GACTxD,OAAQ+B,EACR9D,SArIe,SAACP,GACxBtB,EACGqI,WAAW/G,GACXP,MAAK,WACJ,IAAM8G,EAAWpI,EAAM6I,QAAO,SAACrH,GAAD,OAAUA,EAAKvC,MAAQ4C,KACrDwE,EAAS+B,MAEVjB,OAAM,SAACC,GACNC,QAAQC,IAAIF,SA+HV,kBAAC,EAAD,CAAY1H,KAAK,aAAalB,KAAMwH,EAAc1F,QAASqH,KAC3D,kBAAC,EAAD,CACE3F,OAAQuE,GACRjG,QAASqH,GACTzC,cAAeA,GACfC,QAAQ,wKACRC,WAAW,4MC3RvB0D,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,KACE,kBAAC,EAAD,QAGJpB,SAASqB,eAAe,W","file":"static/js/main.09716f7c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo-mesto.c6f11019.svg\";","module.exports = __webpack_public_path__ + \"static/media/success.e38b395c.svg\";","module.exports = __webpack_public_path__ + \"static/media/fail.4072126c.svg\";","import React from 'react'\nimport logo from '../images/logo-mesto.svg'\nimport { Link, Route } from 'react-router-dom';\n\n\nfunction Header({ email, onSignOut }) {\n  return (\n    <header className=\"header\">\n      <img src={logo} className=\"logo\" alt=\"Логотип\" />\n      <div className=\"header__section\">\n      <Route exact path=\"/\">\n        <p className=\"header__email\">{email}</p>\n        <Link to=\"/sign-in\" className=\"header__button\" onClick={onSignOut}>\n          Выйти\n        </Link>\n      </Route>\n\n      <Route path=\"/sign-up\">\n        <Link to=\"/sign-in\" className=\"header__button\">\n          Войти\n        </Link>\n      </Route>\n\n      <Route path=\"/sign-in\">\n        <Link to=\"/sign-up\" className=\"header__button\">\n          Регистрация\n        </Link>\n      </Route>\n      </div>\n    </header>\n  )\n}\n\nexport default Header\n","import React from 'react'\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n      <h4 className=\"footer__author\">&copy; 2020 Mesto Russia</h4>\n    </footer>\n  )\n}\n\nexport default Footer\n","import React from 'react'\n\nexport const CurrentUserContext = React.createContext()\n","import React from 'react'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction Card({ card, onCardClick, onCardDelete, onCardLike, onCardDislike }) {\n  const currentUser = React.useContext(CurrentUserContext)\n\n  const isOwn = card.owner._id === currentUser._id // Определяем, являемся ли мы владельцем текущей карточки\n\n  const isLiked = card.likes.some((i) => i._id === currentUser._id) // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n\n  const cardLikeButtonClassName = `element__like ${isLiked && 'element__like_theme_black'}`\n  const handleClick = () => {\n    onCardClick(card)\n  }\n  const handleDeleteClick = () => {\n    onCardDelete(card._id)\n  }\n  const handleLikeClick = () => {\n    onCardLike(card)\n  }\n  const handleDislikeClick = () => {\n    onCardDislike(card)\n  }\n\n  return (\n    <li className=\"element\">\n      <img\n        style={{ backgroundImage: `url(${card.link})` }}\n        className=\"element__image\"\n        alt=\"\"\n        onClick={handleClick}\n      />\n      {isOwn && <button className=\"element__trash\" onClick={handleDeleteClick} />}\n      <div className=\"element__info\">\n        <h3 className=\"element__title\">{card.name}</h3>\n        <div className=\"element__like-container\">\n          <button\n            className={cardLikeButtonClassName}\n            onClick={isLiked ? handleDislikeClick : handleLikeClick}\n          />\n          <p className=\"element__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n    </li>\n  )\n}\n\nexport default Card\n","import React from 'react'\nimport Card from './Card'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction Main({\n  onEditAvatar,\n  onEditProfile,\n  onAddPlace,\n  onCardClick,\n  cards,\n  onCardLike,\n  onCardDislike,\n  onCardDelete,\n}) {\n  const currentUser = React.useContext(CurrentUserContext)\n\n  return (\n    <main className=\"content\">\n      <section className=\"profile\">\n        <button\n          className=\"profile__avatar\"\n          style={{ backgroundImage: `url(${currentUser.avatar})` }}\n          onClick={onEditAvatar}\n        />\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <button className=\"profile__edit-button\" onClick={onEditProfile} />\n          <p className=\"profile__job\">{currentUser.about}</p>\n        </div>\n        <button className=\"profile__add-button\" onClick={onAddPlace} />\n      </section>\n\n      <div className=\"elements\">\n        <ul className=\"elements__list\">\n          {cards.map((card) => (\n            <Card\n              key={card._id}\n              card={card}\n              onCardClick={onCardClick}\n              onCardDelete={onCardDelete}\n              onCardLike={onCardLike}\n              onCardDislike={onCardDislike}\n            />\n          ))}\n        </ul>\n      </div>\n    </main>\n  )\n}\n\nexport default Main\n","import React from 'react'\n\nfunction ImagePopup({ card, onClose, name }) {\n  return (\n    <section className={`popup popup_${name} ${card && 'popup_opened'}`}>\n      <div className=\"popup__container-place\">\n        <img src={card && card.link} className=\"popup__image\" alt={card && card.name} />\n        <p className=\"popup__place\">{card && card.name}</p>\n        <button className=\"popup__close\" onClick={onClose} />\n      </div>\n    </section>\n  )\n}\n\nexport default ImagePopup\n","class Api {\n  constructor({ baseUrl, headers }) {\n    this.baseUrl = baseUrl\n    this.headers = headers\n  }\n\n  _handleOriginalResponse(res) {\n    if (res.ok) {\n      return res.json()\n    }\n    return Promise.reject(new Error(`Что-то пошло не так: ${res.status}`))\n  }\n  getAllInfo() {\n    return Promise.all([this.getInitialCards(), this.getUserInfo()])\n  }\n\n  getInitialCards() {\n    return fetch(`${this.baseUrl}/cards`, {\n      headers: this.headers,\n    }).then(this._handleOriginalResponse)\n  }\n\n  addCard(item) {\n    return fetch(`${this.baseUrl}/cards`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify(item),\n    }).then(this._handleOriginalResponse)\n  }\n\n  deleteCard(id) {\n    return fetch(`${this.baseUrl}/cards/${id}`, {\n      method: 'DELETE',\n      headers: this.headers,\n    }).then(this._handleOriginalResponse)\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/users/me`, {\n      headers: this.headers,\n    }).then(this._handleOriginalResponse)\n  }\n\n  setUserInfo(item) {\n    return fetch(`${this.baseUrl}/users/me`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify(item),\n    }).then(this._handleOriginalResponse)\n  }\n\n  editAvatar(item) {\n    return fetch(`${this.baseUrl}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify(item),\n    }).then(this._handleOriginalResponse)\n  }\n\n  putLike(id) {\n    return fetch(`${this.baseUrl}/cards/likes/${id}`, {\n      method: 'PUT',\n      headers: this.headers,\n    }).then(this._handleOriginalResponse)\n  }\n\n  removeLike(id) {\n    return fetch(`${this.baseUrl}/cards/likes/${id}`, {\n      method: 'DELETE',\n      headers: this.headers,\n    }).then(this._handleOriginalResponse)\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-14',\n  headers: {\n    authorization: 'e63db112-531a-4c6f-ae02-ccc048d1696b',\n    'Content-Type': 'application/json',\n  },\n})\nexport default api\n","import React from 'react'\n\nfunction PopupWithForm({ isOpen, children, onClose, name, title, submit, onSubmit }) {\n  return (\n    <section\n      className={`popup popup_${name} ${isOpen && `popup_opened`} `}\n      onClick={(evt) => (evt.target !== evt.currentTarget) && onClose }\n    >\n      <div className=\"popup__container\">\n        <button className=\"popup__close\" onClick={onClose} />\n        <form className=\"popup__form-container\" name={name} onSubmit={onSubmit} noValidate>\n          <h2 className=\"popup__title\">{title}</h2>\n          <fieldset className=\"popup__form\">\n            {children}\n            <input type=\"submit\" className=\"popup__button\" value={submit} onClick={onClose} />\n          </fieldset>\n        </form>\n      </div>\n    </section>\n  )\n}\n\nexport default PopupWithForm\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const [name, setName] = React.useState('')\n  const [description, setDescription] = React.useState('')\n  const currentUser = React.useContext(CurrentUserContext)\n\n  const handleNameChange = (e) => {\n    setName(e.target.value)\n  }\n  const handleJobChange = (e) => {\n    setDescription(e.target.value)\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name)\n    setDescription(currentUser.about)\n  }, [currentUser])\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onUpdateUser({\n      name,\n      about: description,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit-profile\"\n      title=\"Редактировать профиль\"\n      submit=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__input-container\">\n        <input\n          type=\"text\"\n          id=\"name\"\n          name=\"name\"\n          className=\"popup__name popup__input\"\n          placeholder=\"Имя\"\n          value={name || ''}\n          onChange={handleNameChange}\n          required\n          minLength=\"2\"\n          maxLength=\"40\"\n        />\n        <span className=\"popup__input-error\" id=\"name-error\"></span>\n      </div>\n      <div className=\"popup__input-container\">\n        <input\n          type=\"text\"\n          id=\"job\"\n          name=\"about\"\n          className=\"popup__job popup__input\"\n          placeholder=\"Профессия\"\n          value={description || ''}\n          onChange={handleJobChange}\n          required\n          minLength=\"2\"\n          maxLength=\"200\"\n        />\n        <span className=\"popup__input-error\" id=\"job-error\"></span>\n      </div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditProfilePopup\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const avatarRef = React.useRef()\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Обновить аватар\"\n      submit=\"Сохранить\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__input-container\">\n        <input\n          type=\"url\"\n          id=\"link\"\n          name=\"avatar\"\n          className=\"popup__job popup__job_theme_place popup__input\"\n          placeholder=\"Ссылка на аватар\"\n          required\n          ref={avatarRef}\n        />\n        <span className=\"popup__input-error\" id=\"link-error\"></span>\n      </div>\n    </PopupWithForm>\n  )\n}\n\nexport default EditAvatarPopup\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction AddPlacePopup({ onClose, isOpen, onAddPlace }) {\n  const nameRef = React.useRef()\n  const linkRef = React.useRef()\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    // Передаём значения управляемых компонентов во внешний обработчик\n    onAddPlace({\n      name: nameRef.current.value,\n      link: linkRef.current.value,\n    })\n  }\n\n  return (\n    <PopupWithForm\n      name=\"add-place\"\n      title=\"Новое место\"\n      submit=\"Создать\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n    >\n      <div className=\"popup__input-container\">\n        <input\n          type=\"text\"\n          id=\"place\"\n          name=\"name\"\n          className=\"popup__name popup__name_theme_place popup__input\"\n          placeholder=\"Название\"\n          required\n          minLength=\"1\"\n          maxLength=\"30\"\n          ref={nameRef}\n        />\n        <span className=\"popup__input-error\" id=\"place-error\"></span>\n      </div>\n      <div className=\"popup__input-container\">\n        <input\n          type=\"url\"\n          id=\"link\"\n          name=\"link\"\n          className=\"popup__job popup__job_theme_place popup__input\"\n          placeholder=\"Ссылка на картинку\"\n          required\n          ref={linkRef}\n        />\n        <span className=\"popup__input-error\" id=\"link-error\"></span>\n      </div>\n    </PopupWithForm>\n  )\n}\nexport default AddPlacePopup\n","import React from 'react'\nimport PopupWithForm from './PopupWithForm'\n\nfunction ConfirmDeletePopup({ cardId, isOpen, onClose, onSubmit} ) {\n   const handleConfirm = (e) => {\n    e.preventDefault()\n    onSubmit(cardId)\n   }\n\n  return (\n    <PopupWithForm \n      name=\"delete\" \n      title=\"Вы уверенны?\" \n      submit=\"Да\" \n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleConfirm}\n    />\n    \n  )\n}\n\nexport default ConfirmDeletePopup\n","import React from 'react';\n\nfunction Login ({ name, title, submit, onLogin }) {\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n  \n  const handleEmailChange = (e) => {\n    setEmail(e.target.value)\n  }\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value)\n  }\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onLogin(email, password)\n  }\n  return (\n    <section className=\"popup popup_theme_sign\">\n    <div className=\"popup__container popup__container_theme_sign\">\n      <form className=\"popup__form-container\" name={name} onSubmit={handleSubmit} noValidate>\n        <h2 className=\"popup__title popup__title_theme_sign\">{title}</h2>\n        <fieldset className=\"popup__form\">\n        <div className=\"popup__input-container\">\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          className=\"popup__name popup__input popup__input_theme_sign\"\n          placeholder=\"Email\"\n          value={email || ''}\n          onChange={handleEmailChange}\n          required\n        />\n        <span className=\"popup__input-error\" id=\"email-error\"></span>\n      </div>\n      <div className=\"popup__input-container\">\n        <input\n          type=\"password\"\n          id=\"password\"\n          name=\"password\"\n          className=\"popup__job popup__job_theme_sign popup__input popup__input_theme_sign\"\n          placeholder=\"Пароль\"\n          value={password || ''}\n          onChange={handlePasswordChange}\n          required\n          minLength=\"4\"\n          maxLength=\"12\"\n        />\n        <span className=\"popup__input-error\" id=\"password-error\"></span>\n      </div>\n          <input type=\"submit\" className=\"popup__button popup__button_theme_sign\" value={submit}  />\n        </fieldset>\n      </form>\n      </div>\n  </section>\n  )\n}\n\nexport default Login\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register ({ name, title, submit, onRegister }) {\n  const [email, setEmail] = React.useState('')\n  const [password, setPassword] = React.useState('')\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value)\n  }\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value)\n  }\n\n  const handleSubmit = (e) => {\n    e.preventDefault()\n    onRegister(email, password)\n  }\n\n  return (\n    <section className=\"popup popup_theme_sign\">\n    <div className=\"popup__container popup__container_theme_sign\">\n      <form className=\"popup__form-container\" name={name} onSubmit={handleSubmit} noValidate>\n        <h2 className=\"popup__title popup__title_theme_sign\">{title}</h2>\n        <fieldset className=\"popup__form\">\n        <div className=\"popup__input-container\">\n        <input\n          type=\"email\"\n          id=\"email\"\n          name=\"email\"\n          className=\"popup__name popup__input popup__input_theme_sign\"\n          placeholder=\"Email\"\n          value={email || ''}\n          onChange={handleEmailChange}\n          required\n        />\n        <span className=\"popup__input-error\" id=\"email-error\"></span>\n      </div>\n      <div className=\"popup__input-container\">\n        <input\n          type=\"password\"\n          id=\"password\"\n          name=\"password\"\n          className=\"popup__job popup__job_theme_sign popup__input popup__input_theme_sign\"\n          placeholder=\"Пароль\"\n          value={password || ''}\n          onChange={handlePasswordChange}\n          required\n          minLength=\"4\"\n          maxLength=\"12\"\n        />\n        <span className=\"popup__input-error\" id=\"password-error\"></span>\n      </div>\n          <input type=\"submit\" className=\"popup__button popup__button_theme_register\" value={submit}  />\n        </fieldset>\n      </form>\n      </div>\n      <div className=\"popup__sign-in\">\n          <p className=\"popup__paragraph\">Уже зарегистрированы?\n            <Link to=\"/sign-in\" className=\"popup__sign-in-link\">Войти</Link>\n          </p>\n        </div>\n  </section>\n  )\n}\n\nexport default Register\n","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n)}\n\nexport default ProtectedRoute;","export const BASE_URL = 'https://auth.nomoreparties.co';\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n  .then((res) => {\n    if (res.ok) {\n      return res.json();\n    }  \n    return Promise.reject(new Error(`Что-то пошло не так: ${res.status}`))\n  })\n}; \n\nexport const checkToken = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`,\n      }\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json();\n      }  \n      return Promise.reject(new Error(`Что-то пошло не так: ${res.status}`))\n    })\n  }\n\n  export const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({email, password})\n    })\n    .then((res) => {\n      if (res.ok) {\n        return res.json();\n      }  \n      return Promise.reject(new Error(`Что-то пошло не так: ${res.status}`))\n    })\n    .then((data) => {\n      if (data.token){\n        localStorage.setItem('jwt', data.jwt);\n        return data;\n      }\n    })\n  }; \n  ","import React from 'react';\nimport success from '../images/success.svg'\nimport fail from '../images/fail.svg'\n\nconst InfoTooltip = ({ tooltipStatus, onClose, isOpen, message, errMessage }) => {\n  return (\n    <section\n      className={`popup ${isOpen && `popup_opened`} `}\n      onClick={(evt) => (evt.target !== evt.currentTarget) && onClose }\n    >\n      <div className=\"popup__container\">\n        <button className=\"popup__close\" onClick={onClose} />\n        <img \n          className=\"popup__icon\" \n          src={ tooltipStatus ? success : fail }\n          alt=\"Tooltip\"\n        />\n        <h2 className=\"popup__title popup__title_theme_tooltip\">\n          { tooltipStatus ? message : errMessage }\n        </h2>\n      </div>\n    </section>\n  )\n}\n\nexport default InfoTooltip","import React from 'react'\nimport { Route, useHistory, Switch } from 'react-router-dom'\nimport Header from './Header'\nimport Footer from './Footer'\nimport Main from './Main'\nimport ImagePopup from './ImagePopup'\nimport api from '../utils/Api'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\nimport EditProfilePopup from './EditProfilePopup'\nimport EditAvatarPopup from './EditAvatarPopup'\nimport AddPlacePopup from './AddPlacePopup'\nimport ConfirmDeletePopup from './ConfirmDeletePopup'\nimport Login from './Login'\nimport Register from './Register'\nimport ProtectedRoute from './ProtectedRoute'\nimport * as auth from '../utils/auth.js'\nimport InfoTooltip  from './InfoTooltip'\n\nconst App = () => {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false)\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false)\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false)\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = React.useState(false)\n  const [selectedCard, setSelectedCard] = React.useState(null)\n  const [cardToDelete, setCardToDelete] = React.useState(null)\n  const [currentUser, setCurrentUser] = React.useState({})\n  const [cards, setCards] = React.useState([])\n  const [loggedIn, setLoggedIn] = React.useState(false)\n  const [email, setEmail] = React.useState('')\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false)\n  const [tooltipStatus, setTooltipStatus] = React.useState('')\n  const history = useHistory(); \n\n  React.useEffect(() => {\n    handleTokenCheck()\n  })\n\n  const onRegister = (email, password) => {\n    auth.register(email, password)\n    .then((res) => {\n      handleTooltip()\n      setTooltipStatus(true)\n      history.push('/sign-in');\n      })\n      .catch((err) => {\n        if(err.status === 400){\n      console.log('Некорректно заполнено одно из полей ')\n      }\n      handleTooltip()\n      setTooltipStatus(false)\n    })\n  }\n\n  const onLogin = (email, password) => {\n    auth.authorize(email, password)\n    .then(res  => {\n        localStorage.setItem('jwt', res.token)\n        setLoggedIn(true)\n        setEmail(email)\n        history.push('/')\n    })\n    .catch(err => {\n      if (err.status === 400) {\n        return console.log('не передано одно из полей')\n      } else if (err.status === 401) {\n        return console.log('пользователь с email не найден')\n      }\n      return console.log('error 500')\n    })\n  }\n\n  const handleTokenCheck = () => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt){\n    auth.checkToken(jwt)\n    .then((res) => {\n        setLoggedIn(true)\n        setEmail(res.data.email)\n        history.push('/');\n    })\n    .catch(err => {\n      if (err.status === 401) {\n        return console.log('Токен не передан или передан не в том формате')\n      }\n        return console.log('Переданный токен некорректен')\n    })\n   }\n  }\n\n  const onSignOut = () => {\n    localStorage.removeItem('jwt');\n    setLoggedIn(false)\n    history.push('/signin');\n  }\n\n  \n\n  React.useEffect(() => {\n    api\n      .getAllInfo()\n      .then((res) => {\n        const [dataCards, dataProfile] = res\n        setCards(dataCards)\n        setCurrentUser(dataProfile)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }, [])\n\n  React.useEffect(() => {\n    const handleEscClose = (evt) => {\n      if (evt.key === 'Escape') {\n        closeAllPopups()\n      }\n    }\n    document.addEventListener('keydown', handleEscClose)\n    return () => {\n      document.removeEventListener('keydown', handleEscClose)\n    }\n  },[])\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id) // Снова проверяем, есть ли уже лайк на этой карточке\n    api\n      .putLike(card._id, !isLiked) // Отправляем запрос в API и получаем обновлённые данные карточки\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c)) // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        setCards(newCards) // Обновляем стейт\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const handleCardDislike = (card) => {\n    const isLiked = card.likes.some((i) => i._id === currentUser._id) // Снова проверяем, есть ли уже лайк на этой карточке\n    api\n      .removeLike(card._id, !isLiked) // Отправляем запрос в API и получаем обновлённые данные карточки\n      .then((newCard) => {\n        const newCards = cards.map((c) => (c._id === card._id ? newCard : c)) // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        setCards(newCards) // Обновляем стейт\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const handleCardDelete = (id) => {\n    api\n      .deleteCard(id)\n      .then(() => {\n        const newCards = cards.filter((item) => item._id !== id)\n        setCards(newCards)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const handleUpdateUser = (data) => {\n    api\n      .setUserInfo(data)\n      .then((res) => {\n        setCurrentUser(res)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const handleUpdateAvatar = (data) => {\n    api\n      .editAvatar(data)\n      .then((res) => {\n        setCurrentUser(res)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const handleAddPlaceSubmit = (newCard) => {\n    api\n      .addCard(newCard)\n      .then((newCard) => {\n        setCards([newCard, ...cards])\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true)\n  }\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true)\n  }\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true)\n  }\n  const handleCardClick = (selectedCard) => {\n    setSelectedCard(selectedCard)\n  }\n  const handleDeleteClick = (cardId) => {\n    setIsDeletePopupOpen(true)\n    setCardToDelete(cardId)\n  }\n  const handleTooltip = () => {\n    setIsInfoTooltipOpen(true)\n  }\n\n  const closeAllPopups = () => {\n    setIsEditProfilePopupOpen(false)\n    setIsAddPlacePopupOpen(false)\n    setIsEditAvatarPopupOpen(false)\n    setSelectedCard(null)\n    setIsDeletePopupOpen(false)\n    setIsInfoTooltipOpen(false)\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <div className=\"page__container\">\n          <Header email={email} onSignOut={onSignOut} />\n          <Switch>\n          <ProtectedRoute \n            exact path=\"/\"\n            loggedIn={loggedIn}  \n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onCardClick={handleCardClick}\n            onCardDelete={handleDeleteClick}\n            onCardLike={handleCardLike}\n            onCardDislike={handleCardDislike}\n            cards={cards}\n            component={Main}\n          />\n          <Route exact path=\"/\"><Footer /></Route>\n          <Route path=\"/sign-in\">\n            <Login \n              name=\"login\"\n              title=\"Вход\" \n              submit=\"Войти\" \n              onLogin={onLogin}\n            />\n          </Route>\n          <Route path=\"/sign-up\">\n            <Register \n              name=\"register\"\n              title=\"Регистрация\" \n              submit=\"Зарегистрироваться\" \n              onRegister={onRegister}\n            />\n          </Route>\n          </Switch>\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n          <ConfirmDeletePopup\n            isOpen={isDeletePopupOpen}\n            onClose={closeAllPopups}\n            cardId={cardToDelete}\n            onSubmit={handleCardDelete}\n          />\n          <ImagePopup name=\"photo-zoom\" card={selectedCard} onClose={closeAllPopups} />\n          <InfoTooltip \n            isOpen={isInfoTooltipOpen}\n            onClose={closeAllPopups}\n            tooltipStatus={tooltipStatus}\n            message=\"Вы успешно зарегистрировались!\"\n            errMessage='Что-то пошло не так! Попробуйте ещё раз.'\n          />\n        </div>\n      </div>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter } from 'react-router-dom'\nimport './index.css'\nimport App from './components/App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}